"use strict";flexbe_cli.block.register(10,{onLoad:function(){var t=this;if(flexbe_cli.is_admin){this.$map=$(".component-map",this.$block),this.data=this.$map.data("data");var i=this.$map[0].offsetHeight;clearInterval(this.timer),this.timer=setInterval((function(){var a=t.$map[0].offsetHeight;a!=i&&(i=a,t.$map.trigger("resizeMap"))}),100)}}});
"use strict";flexbe_cli.block.register(102,{onLoad:function(){this.fixHeight()},onUpdate:function(i){i.templateRendered&&this.fixHeight()},fixHeight:function(){if(!(window.innerWidth<=768)){var i=0,t=this.$block.find(".item-title");t.css("min-height",""),t.each((function(t,e){i=Math.max($(e).outerHeight(),i)})),t.css("min-height",i+"px")}}});
"use strict";flexbe_cli.block.register(103,{onLoad:function(){var i=this;this.fixWidth();var t=0;$(window).off("resize."+this.id).on("resize."+this.id,(function(){clearTimeout(t),t=setTimeout(i.fixWidth.bind(i),250)}))},fixWidth:function(){if(!(window.innerWidth<=768)){var i=this.$block.find(".table"),t=i.data("size")+1,e=i.innerWidth();i.find(".td").css("width",e/t+"px")}}});
"use strict";flexbe_cli.block.register(104,{onLoad:function(){var i=this;this.fixWidth();var t=0;$(window).off("resize."+this.id).on("resize."+this.id,(function(){clearTimeout(t),t=setTimeout(i.fixWidth.bind(i),250)}))},onScreen:function(i){i&&this.fixWidth()},fixWidth:function(){if(!(window.innerWidth<=768)){var i=this.$block.find(".table"),t=i.find(".row"),n=[];i.find(".td").css("width",""),t.each((function(i,t){var o=$(t).find("> .td");0===i&&o.each((function(i,t){void 0===n[i]&&(n[i]=$(t).outerWidth().toString()+"px")})),o.each((function(i,t){$(t).css("width",n[i])}))}))}}});
"use strict";flexbe_cli.block.register(106,{require:["/_s/lib/swiper/swiper.v5.js?538"],onLoad:function(e){var i=this,t=i.$block.find(".slider-main"),s=i.$block.find(".slider-preview"),r=i.$block.find(".slider-button"),n=t.data("count");1!=n&&(i.current=Math.floor(i.$block.data("slide-move"))||0,i.current>=n&&(i.current=n-1),i.current<0&&(i.current=0),i.swiper=new Swiper(t[0],{wrapperClass:"slider",slideClass:"slide",noSwipingClass:"redactor-box",navigation:{prevEl:r[0],nextEl:r[1]},touchMoveStopPropagation:!0,preventClicksPropagation:!0,preventClicks:!0,spaceBetween:15,autoHeight:!0,initialSlide:i.current,on:{init:function(){var e=this;flexbe_cli.is_admin&&(this.update(),setTimeout((function(){return e.update()}),200),setTimeout((function(){return e.update()}),1e3),setTimeout((function(){return e.update()}),3e3))},slideChange:function(){i.current=this.activeIndex,i.setCurrent()}}}),this.preview=new Swiper(s[0],{wrapperClass:"slider",slideClass:"slide",touchMoveStopPropagation:!0,preventClicksPropagation:!0,preventClicks:!0,slidesPerView:"auto",spaceBetween:0,slideToClickedSlide:!0,initialSlide:this.current,on:{tap:function(){void 0!==this.clickedIndex&&(i.current=this.clickedIndex,i.setCurrent())}}}),e&&"items_add"===e.reason&&(this.swiper.slideTo(e.reasonData.to),this.preview.slideTo(e.reasonData.to)),i.setCurrent())},setCurrent:function(){this.swiper&&this.swiper.slideTo(this.current||0),this.preview&&this.preview.slideTo(Math.max(this.current-1,0)),this.$block.data("slide-move",this.current),this.$block.find(".slide").removeClass("active").closest('[data-item-id="'+(this.current+1)+'"]').addClass("active")},onUpdate:function(e){e.styleRendered&&this.swiper&&this.swiper.update(!1)}});
"use strict";flexbe_cli.block.register(107,{require:["/_s/lib/swiper/swiper.v5.js?538"],onLoad:function(i){var e=this,t=this.$block.find(".slider-main"),s=this.$block.find(".slider-button"),r=this.$block.find(".slider-pagination"),n=t.data("count"),a=t.data("slider");n<=4||!a||(this.current=Math.floor(this.$block.data("slide-move"))||0,this.current>=n&&(this.current=n-1),this.current<0&&(this.current=0),this.swiper=new Swiper(t[0],{wrapperClass:"slider",slideClass:"slide",noSwipingClass:"redactor-box",navigation:{prevEl:s[0],nextEl:s[1]},pagination:{el:r[0],type:"bullets",clickable:!0},touchMoveStopPropagation:!0,preventClicksPropagation:!0,preventClicks:!0,spaceBetween:0,initialSlide:this.current,simulateTouch:!flexbe_cli.is_admin,on:{slideChange:function(){e.current=this.activeIndex,e.$block.data("slide-move",this.activeIndex)}}}),i&&"items_add"===i.reason&&this.swiper.slideTo(i.reasonData.to))}});
"use strict";
"use strict";
"use strict";flexbe_cli.block.register(111,{mapInit:!1,index:!1,onLoad:function(){var t=this;this.$map=$(".component-map",this.$block),this.$map.length?this.initMap():setTimeout((function(){t.onLoad()}),50)},initMap:function(){var t=this;if(this.data=this.$map.data("data"),this.$map.on("mapInit",(function(){t.mapInit=!0,t.selectMark(t.index||0,!0)})),this.$block.find(".tab-list").on("click","a",(function(i){var a=parseInt($(i.currentTarget).closest(".tab").attr("data-item-id"),10)-1;t.selectMark(a)})),this.$map.on("balloonOpen",(function(i,a){t.selectMark(a)})),flexbe_cli.is_admin){var i=this.$map[0].offsetHeight;clearInterval(this.timer),this.timer=setInterval((function(){var a=t.$map[0].offsetHeight;a!=i&&(i=a,t.$map.trigger("resizeMap"))}),100)}},selectMark:function(t,i){void 0===i&&(i=!1);var a=this.data.places[t];if(a&&(this.index!=t||i)){this.index=t;var e=this.$block.find(".tab-list"),s=this.$block.find(".item-list");e.find(".active").removeClass("active"),s.find(".active").removeClass("active"),e.find('[data-item-id="'+(this.index+1)+'"]').addClass("active"),s.find('[data-item-id="'+(this.index+1)+'"]').addClass("active"),this.data.center=a.coords,this.$map.trigger("selectMark",this.index)}}});
"use strict";flexbe_cli.block.register(112,{onLoad:function(){if($(".grid.expanded",this.$block).length){var e=$(".item",this.$block),t=flexbe_cli.is_admin?".expand-button":".item-title";$(t,e).on("click",(function(t){var i=$(t.currentTarget).parents(".item"),l=i.find(".item-desc").get(0),n=i.find(".desc").outerHeight(!0);flexbe_cli.is_admin||(e.not(i).addClass("collapsed"),l.style.cssText=n?"max-height: "+n+"px":"max-height: none"),i.toggleClass("collapsed")}))}}});
"use strict";flexbe_cli.block.register(117,{onLoad:function(){var t=this;if(this.$map=$(".component-map",this.$block),this.data=this.$map.data("data"),flexbe_cli.is_admin){var i=this.$map[0].offsetHeight;clearInterval(this.timer),this.timer=setInterval((function(){var a=t.$map[0].offsetHeight;a!=i&&(i=a,t.$map.trigger("resizeMap"))}),100)}}});
"use strict";flexbe_cli.block.register(118,{onLoad:function(){}});
"use strict";
"use strict";
"use strict";flexbe_cli.block.register(46,{onLoad:function(){this.$block.find(".overlayed")[0]&&this.$block.on("mouseover mouseout",".item",(function(e){var t=$(e.currentTarget),i=t.find(".overlay");if(t.toggleClass("hover","mouseover"===e.type),"mouseover"===e.type){var o=parseInt(i.find(".img-title").outerHeight(!0)||0,10),r=parseInt(i.find(".img-desc").outerHeight(!0)||0,10),s=parseInt(i.find(".img-text").outerHeight(!0)||0,10);i.css("minHeight",40+o+r+s+"px")}else i.attr("style","")}))}});
"use strict";flexbe_cli.block.register(48,{require:["/_s/lib/swiper/swiper.v5.js?538"],onLoad:function(e){var i=this,s=this.$block.find(".slider-main"),t=this.$block.find(".slider-button"),r=this.$block.find(".slider-pagination"),a=s.data("count");a<=1||!s[0]||(this.slideshow=!flexbe_cli.is_admin&&Math.floor(1e3*s.data("slideshow"))||0,this.current=Math.floor(this.$block.data("slide-move"))||0,this.current=Math.max(0,Math.min(a-1,this.current)),this.swiper=new Swiper(s[0],{wrapperClass:"slider",slideClass:"slide",noSwipingClass:"redactor-box",navigation:{prevEl:t[0],nextEl:t[1]},pagination:{el:r[0],type:"bullets",clickable:!0},touchMoveStopPropagation:!1,preventClicksPropagation:!0,preventClicks:!0,simulateTouch:!flexbe_cli.is_admin,slidesPerView:1,slidesPerGroup:1,speed:350,spaceBetween:0,autoHeight:!1,threshold:10,initialSlide:this.current,autoplay:this.slideshow&&{delay:this.slideshow},breakpoints:{768:{speed:650,slidesPerView:3,slidesPerGroup:3}},on:{slideChange:function(){i.current=this.activeIndex,i.setCurrent()}}}),e&&"items_add"===e.reason&&this.swiper.slideTo(e.reasonData.to))},setCurrent:function(){this.$block.data("slide-move",this.current)},onFocus:function(e){this.swiper&&this.swiper.autoplay&&this.slideshow&&(e?this.swiper.autoplay.run():this.swiper.autoplay.pause())},onUpdate:function(e){e.styleRendered&&this.swiper&&this.swiper.update(!1)}});
"use strict";flexbe_cli.block.register(49,{onLoad:function(){var t=this;this.$fluid=this.$block.find(".container-fluid"),this.$list=this.$block.find(".item-list"),this.$items=this.$block.find(".item");var i={cols:3,margin:this.$list.data("margin")};this.loadImages((function(){return t.render(i)})),$(window).off("resize.b"+this.id).on("resize.b"+this.id,(function(){return t.render(i,200)}))},tmt:0,render:function(t,i,e){var n=this;void 0===i&&(i=0),void 0===e&&(e=!1),clearTimeout(this.tmt),this.tmt=setTimeout((function(){if($(window).width()<767)return n.$list.removeAttr("style"),n.$fluid.removeAttr("style"),n.$items.removeAttr("style"),!1;var i,r,s,o,a,l=0,u=[];o=parseInt(t.cols||3),i=n.$list.outerWidth(),r=parseInt(t.margin||0,10),s=parseInt(i/o,10)-r,a=1==o?-r/2:i%(s+r)/2;for(var c=0;c<o;c++)u.push(-r/2);n.$items.each((function(t,i){var e=$(i),o=n.getColumn(u);e.attr("style","position: absolute !important"),e.css({width:s,margin:r/2,top:u[o]+r/2,left:(s+r)*o+a}),u[o]+=e.outerHeight()+r,l<u[o]&&(l=u[o])})),l&&n.$list.css("min-height",l+parseInt(r/2,10)+"px"),e||n.render(t,1e3,!0)}),i)},loadImages:function(t){void 0===t&&(t=function(){});var i=this.$items.find("img"),e=i.length-1;0===e&&t(),i.each((function(i,n){var r=new Image;r.onload=r.onerror=function(){return e>0?e--:t()},r.src=n.src}))},getColumn:function(t){var i;return(i=$.inArray(Math.min.apply(Math,t),t))>0&&t[i-1]-t[i]<20?i--:i>0&&t[0]-t[i]<20&&(i=0),i}});
"use strict";
"use strict";flexbe_cli.block.register(69,{onLoad:function(){flexbe_cli.run.is_mobile&&this.$block.find(".parallax").removeClass("parallax")}});
"use strict";flexbe_cli.block.register(70,{require:["/_s/lib/swiper/swiper.v5.js?538"],onLoad:function(e){var i=this,r=i.$block.find(".slider-main"),s=i.$block.find(".slider-button"),t=i.$block.find(".slider-pagination"),n=r.data("count"),l=r.data("slider");n<=2||!l||(i.current=Math.floor(i.$block.data("slide-move"))||0,e&&"items_add"===e.reason&&(i.current=e.reasonData.to),i.current>=n&&(i.current=n-1),i.current<0&&(i.current=0),i.swiper=new Swiper(r.find(".slider-wrapper")[0],{wrapperClass:"slider",slideClass:"slide",noSwipingClass:"fr-element",navigation:{prevEl:s[0],nextEl:s[1]},pagination:{el:t[0],type:"bullets",clickable:!0},simulateTouch:!flexbe_cli.is_admin,touchMoveStopPropagation:!0,preventClicksPropagation:!0,preventClicks:!0,speed:350,slidesPerView:1,slidesPerGroup:1,spaceBetween:20,autoHeight:!flexbe_cli.is_admin,initialSlide:i.current,breakpoints:{768:{speed:450,slidesPerView:2,slidesPerGroup:2}},on:{slideChange:function(){i.current=this.activeIndex,i.$block.data("slide-move",this.activeIndex)}}}))},onUpdate:function(e){e.styleRendered&&this.swiper&&this.swiper.update(!1)}});
"use strict";flexbe_cli.block.register(71,{require:["/_s/lib/swiper/swiper.v5.js?538"],onLoad:function(e){var i=this,t=i.$block.find(".slider-main"),s=i.$block.find(".slider-button"),r=i.$block.find(".slider-pagination"),a=t.data("count");1!=a&&(i.slideshow=!flexbe_cli.is_admin&&Math.floor(1e3*t.data("slideshow"))||0,i.current=Math.floor(i.$block.data("slide-move"))||0,i.current>=a&&(i.current=a-1),i.current<0&&(i.current=0),i.swiper=new Swiper(t[0],{wrapperClass:"slider",slideClass:"slide",noSwipingClass:"redactor-box",navigation:{prevEl:s[0],nextEl:s[1]},pagination:{el:r[0],type:"bullets",clickable:!0},simulateTouch:!flexbe_cli.is_admin,touchMoveStopPropagation:!0,preventClicksPropagation:!0,preventClicks:!0,paginationClickable:!0,speed:450,spaceBetween:0,autoHeight:!1,initialSlide:i.current,loop:!1,autoplay:i.slideshow&&{delay:i.slideshow},on:{init:function(){$(".swiper-slide-duplicate .img-popup",this.$wrapperEl).on("click",(function(e){var i=$(e.currentTarget).parents(".swiper-slide-duplicate");$(".img-popup",i.siblings(".slide[data-swiper-slide-index="+i.attr("data-swiper-slide-index")+"]")).trigger("click"),e.preventDefault()}))},slideChange:function(){i.current=this.activeIndex,i.setCurrent()}}}),e&&"items_add"===e.reason&&this.swiper.slideTo(e.reasonData.to))},setCurrent:function(){this.$block.data("slide-move",this.current)},onFocus:function(e){this.swiper&&this.swiper.autoplay&&this.slideshow&&(e?this.swiper.autoplay.run():this.swiper.autoplay.pause())},onUpdate:function(e){e.styleRendered&&this.swiper&&this.swiper.update(!1)}});
"use strict";flexbe_cli.block.register(72,{require:["/_s/lib/swiper/swiper.v5.js?538"],onLoad:function(e){var i=this,t=i.$block.find(".slider-main"),s=i.$block.find(".slider-button"),r=i.$block.find(".slider-pagination"),a=t.data("count");1!=a&&(i.slideshow=!flexbe_cli.is_admin&&Math.floor(1e3*t.data("slideshow"))||0,i.current=Math.floor(i.$block.data("slide-move"))||0,i.current>=a&&(i.current=a-1),i.current<0&&(i.current=0),i.swiper=new Swiper(t[0],{wrapperClass:"slider",slideClass:"slide",noSwipingClass:"redactor-box",navigation:{prevEl:s[0],nextEl:s[1]},pagination:{el:r[0],type:"bullets",clickable:!0},simulateTouch:!flexbe_cli.is_admin,touchMoveStopPropagation:!0,preventClicksPropagation:!0,paginationClickable:!0,preventClicks:!0,speed:450,spaceBetween:0,autoHeight:!1,initialSlide:i.current,loop:!1,autoplay:i.slideshow&&{delay:i.slideshow},on:{init:function(){$(".swiper-slide-duplicate .img-popup",this.$wrapperEl).on("click",(function(e){var i=$(e.currentTarget).parents(".swiper-slide-duplicate");$(".img-popup",i.siblings(".slide[data-swiper-slide-index="+i.attr("data-swiper-slide-index")+"]")).trigger("click"),e.preventDefault()}))},slideChange:function(){i.current=this.activeIndex,i.setCurrent()}}}),e&&"items_add"===e.reason&&this.swiper.slideTo(e.reasonData.to))},setCurrent:function(){this.$block.data("slide-move",this.current)},onFocus:function(e){this.swiper&&this.swiper.autoplay&&this.slideshow&&this.swiper.autoplay[e?"start":"stop"]()},onUpdate:function(e){e.styleRendered&&this.swiper&&this.swiper.update(!1)}});
"use strict";
"use strict";flexbe_cli.block.register(75,{require:["/_s/lib/swiper/swiper.v5.js?538"],onLoad:function(e){var i=this,s=this.$block.find(".slider-main"),t=this.$block.find(".slider-button"),r=s.data("count"),l=!flexbe_cli.is_admin&&s.data("slider");1!=r&&l&&(this.slideshow=flexbe_cli.run.is_mobile||flexbe_cli.is_admin?0:1e3*Math.floor(s.data("slideshow")),this.current=Math.floor(this.$block.data("slide-move"))||0,this.current>=r&&(this.current=r-1),this.current<0&&(this.current=0),this.swiper=new Swiper(s[0],{wrapperClass:"slider",slideClass:"slide",noSwipingClass:"fr-element",slideActiveClass:"active",navigation:{prevEl:t.closest(".slider-prev").toArray(),nextEl:t.closest(".slider-next").toArray()},effect:"fade",fadeEffect:{crossFade:!0},paginationClickable:!0,simulateTouch:!1,touchMoveStopPropagation:!0,preventClicksPropagation:!0,preventClicks:!0,speed:650,autoHeight:!flexbe_cli.is_admin,initialSlide:i.current,autoplay:!!i.slideshow&&{delay:i.slideshow},on:{slideChange:function(){i.current=this.activeIndex,i.setCurrent()}}}),this.swiper.autoplay.pause())},setCurrent:function(){this.$block.data("slide-move",this.current)},onScreen:function(e){this.swiper&&this.swiper.autoplay&&this.swiper.autoplay.running&&this.slideshow&&!flexbe_cli.run.is_mobile&&(e?this.swiper.autoplay.run():this.swiper.autoplay.pause())},onUpdate:function(e){e.styleRendered&&this.swiper&&this.swiper.update(!1)}});
"use strict";flexbe_cli.block.register(76,{require:["/_s/lib/swiper/swiper.v5.js?538"],onLoad:function(e){var t=this,i=t.$block.find(".slider-main"),r=t.$block.find(".slider-button"),s=i.data("count"),n=i.data("slider");1!=s&&n&&(t.current=Math.floor(t.$block.data("slide-move"))||0,t.current>=s&&(t.current=s-1),t.current<0&&(t.current=0),t.$block.find(".slider-pager .item").on("click",(function(e){var i=+$(e.currentTarget).data("itemId");"number"==typeof i&&(t.current=i-1,t.setCurrent())})),t.swiper=new Swiper(i.find(".slider-wrapper")[0],{wrapperClass:"slider",slideClass:"slide",noSwipingClass:"fr-element",slideActiveClass:"active",navigation:{prevEl:r[0],nextEl:r[1]},simulateTouch:!flexbe_cli.is_admin,touchMoveStopPropagation:!0,preventClicksPropagation:!0,preventClicks:!0,speed:350,spaceBetween:30,autoHeight:!flexbe_cli.is_admin,initialSlide:t.current,loop:!1,on:{slideChange:function(){t.current=this.activeIndex,t.setCurrent()}}}),e&&"items_add"===e.reason&&(t.current=e.reasonData.to),t.setCurrent())},setCurrent:function(){this.swiper&&this.swiper.slideTo(this.current||0),this.$block.data("slide-move",this.current),this.$block.find(".slider-pager .item").removeClass("active").closest('[data-item-id="'+(this.current+1)+'"]').addClass("active")},onUpdate:function(e){e.styleRendered&&this.swiper&&this.swiper.update(!1)}});
"use strict";flexbe_cli.block.register(78,{require:["/_s/lib/swiper/swiper.v5.js?538"],onLoad:function(e){var i=this,t=i.$block.find(".slider-main"),r=i.$block.find(".slider-button"),s=i.$block.find(".slider-pagination"),n=t.data("count"),a=t.data("slider");1!=n&&a&&(i.current=Math.floor(i.$block.data("slide-move"))||0,i.current>=n&&(i.current=n-1),i.current<0&&(i.current=0),i.swiper=new Swiper(t.find(".slider-wrapper")[0],{wrapperClass:"slider",slideClass:"slide",noSwipingClass:"fr-element",slideActiveClass:"active",navigation:{prevEl:r[0],nextEl:r[1]},pagination:{el:s[0],type:"bullets",clickable:!0},paginationClickable:!0,simulateTouch:!1,touchMoveStopPropagation:!0,preventClicksPropagation:!0,preventClicks:!0,speed:350,spaceBetween:30,autoHeight:!flexbe_cli.is_admin,initialSlide:i.current,on:{slideChange:function(){i.current=this.activeIndex,i.setCurrent()}}}),i.$block.find(".slider-pager .item").on("click",(function(e){var t=+$(e.currentTarget).data("itemId");"number"==typeof t&&(i.current=t-1,i.setCurrent())})),e&&"items_add"===e.reason&&(i.current=e.reasonData.to),i.setCurrent())},setCurrent:function(){this.swiper&&this.swiper.slideTo(this.current||0),this.$block.data("slide-move",this.current),this.$block.find(".slider-pager .item").removeClass("active").closest('[data-item-id="'+(this.current+1)+'"]').addClass("active")},onUpdate:function(e){e.styleRendered&&this.swiper&&this.swiper.update(!1)}});
"use strict";
"use strict";flexbe_cli.block.register(9,{require:["/_s/lib/swiper/swiper.v5.js?538"],onLoad:function(e){var i=this,r=i.$block.find(".slider-main"),s=i.$block.find(".slider-button"),t=i.$block.find(".slider-pagination"),n=r.data("count"),l=r.data("slider");flexbe_cli.run.is_desctop&&n<=3||!l||(i.current=Math.floor(i.$block.data("slide-move"))||0,e&&"items_add"===e.reason&&(i.current=e.reasonData.to),i.current>=n&&(i.current=n-1),i.current<0&&(i.current=0),i.swiper=new Swiper(r.find(".slider-wrapper")[0],{wrapperClass:"slider",slideClass:"slide",noSwipingClass:"fr-element",navigation:{prevEl:s[0],nextEl:s[1]},pagination:{el:t[0],type:"bullets",clickable:!0},simulateTouch:!flexbe_cli.is_admin,touchMoveStopPropagation:!0,preventClicksPropagation:!0,preventClicks:!0,speed:350,slidesPerView:1,slidesPerGroup:1,spaceBetween:30,autoHeight:!flexbe_cli.is_admin,initialSlide:i.current,breakpoints:{768:{speed:650,slidesPerView:3,slidesPerGroup:3}},on:{slideChange:function(){i.current=this.activeIndex,i.$block.data("slide-move",i.current)}}}))},onUpdate:function(e){e.styleRendered&&this.swiper&&this.swiper.update(!1)}});
"use strict";flexbe_cli.modal.register(100,{types:{},pay_id:"",hash:"",selectors:{},onLoad:function(){var t=this;this.start(),flexbe_cli.events.on("pay",(function(e,a){a&&"init"==a.action&&t.start()}))},start:function(){this.loadSelectors();var t=this.getQueryParams();if(t){switch(t){case"success":this.showSuccessAlert();break;case"fail":this.showFailAlert();break;case"pay":this.getBill()}setTimeout((function(){flexbe_cli.events.emit("ui_modal_open",{id:"pay"})}),300)}},loadSelectors:function(){this.selectors.$container=this.$modal.find(".container"),this.selectors.$bill=this.$modal.find(".action-bill"),this.selectors.$cash=this.$modal.find(".action-cash"),this.selectors.$already=this.$modal.find(".action-already"),this.selectors.$success=this.$modal.find(".action-success"),this.selectors.$fail=this.$modal.find(".action-fail")},getQueryParams:function(){var t=!1;try{t=JSON.parse('{"'+decodeURI(location.search.substring(1)).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')}catch(t){}if(!t.pay_id)return!1;if(this.pay_id=t.pay_id,this.hash=t.h,t.pay_status){try{history.pushState(null,null,window.location.pathname)}catch(t){}return t.pay_status}return"pay"},getBill:function(){var t=this;this.pay_id&&!1!==this.pay_id&&$.ajax({url:"/mod/pay/ajax",type:"GET",dataType:"json",data:{act:"payData",pay_id:this.pay_id,hash:this.hash}}).done((function(e){if(0===e.status)return!1;t.types=e.pay.support_types,2==e.pay.pay_status?t.showAlreadyPayed(e.pay):t.cashonly()?t.showCashInstruction(e.pay):t.showBillForm(e.pay)}))},showBillForm:function(t){var e=this,a={bank_card:"cards",cash:"cash",visa:"visa",mastercard:"mastercard",yandex:"yandex",qiwi:"qiwi",webmoney:"webmoney",webmoney_z:"webmoney",webmoney_u:"webmoney",mobile_megafon:"megafon",mobile_beeline:"bee",mobile_mts:"mts",mobile_tele2:"t2",sberbank:"sberbank",bank:"bank",w1:"w1",ibank_robo:"ibank_robo",yandex_kassa:"yandexkassa",yandexkassa:"yandexkassa",bank_company:"bank_company",paypal:"paypal"},s=this.selectors.$bill.find(".pay-methods-list").empty(),i=this.selectors.$bill.find(".pay-action"),n=this.selectors.$bill.find(".component-button");this.selectors.$container.attr("data-type","bill"),Object.entries(this.types).forEach((function(t,e){var i=t[0],n=(t[1],flexbe_cli.locale.tr("pay.methods."+i)),o='<label class="item" data-type="'+i+'" title="'+n+'" for="'+i+'">\n                            <input type="radio" name="form[pay_method]" value="'+i+'" id="'+i+'"'+(0===e?'checked="checked"':"")+'>\n\n                            <div class="preview">\n                                <img class="icon-inner" src="/_s/images/v3/theme/res/pay/'+a[i]+'.svg" />\n                            </div>\n                            <span class="text-style-tiny">'+n+"</span>\n                        </label>";s.append(o)})),i.find(".issue-num").text(t.pay_id),i.find(".price").text(flexbe_cli.locale.formatMoney(t.pay_sum)),Object.keys(this.types).length<=1&&this.selectors.$bill.find(".pay-methods .title").hide(),s.on("click",".item",(function(t){return t.preventDefault(),$(t.currentTarget).find("input").prop("checked",!0),!1})),n.on("click",(function(t){var a=s.find("input:checked").val();if(!a)return alert("Выберите способ оплаты"),!1;if("cash"==a)return e.showCashInstruction(),!1;var i="/mod/pay/?pay_type="+a+"&pay_id="+e.pay_id+"&h="+e.hash;$(t.currentTarget).attr("href",i),flexbe_cli.run.is_mobile&&flexbe_cli.run.is_OSX||$(t.currentTarget).addClass("busy")}))},showCashInstruction:function(){this.selectors.$container.attr("data-type","cash"),this.types.cash&&this.types.cash.instruction&&this.selectors.$cash.find(".text").html(this.types.cash.instruction),$.ajax({url:"/mod/pay/ajax",type:"GET",dataType:"json",data:{act:"selectCash",pay_id:this.pay_id,hash:this.hash}})},showAlreadyPayed:function(t){this.selectors.$container.attr("data-type","already");var e=this.selectors.$already.find(".pay-action"),a="";"0"!=t.pay_time_done&&t.pay_time_done_formatted&&(a=t.pay_time_done_formatted),this.selectors.$already.find(".text > span.num").text(t.pay_id),e.find(".title > span.num").text(t.pay_id),e.find(".sub > span").text(a),e.find(".price").text(flexbe_cli.locale.formatMoney(t.pay_sum))},showSuccessAlert:function(){this.selectors.$container.attr("data-type","success"),setTimeout((function(){flexbe_cli.stat.reachGoal(flexbe_cli.stat.goals.pay_done)}),1e3)},showFailAlert:function(){var t=this;this.selectors.$container.attr("data-type","fail"),this.selectors.$fail.find(".component-button").off("click").on("click",(function(){t.getBill()}))},cashonly:function(){return!(!this.types.cash||1!=Object.keys(this.types).length)}});
"use strict";flexbe_cli.modal.register(2,{onInit:function(){this.video=this.$modal.find("iframe")[0],this.videoOrigin=this.video?this.video.src||this.video.getAttribute("data-src"):""},onOpen:function(){this.bindVideo(!0)},onClose:function(){this.bindVideo(!1)},bindVideo:function(i){if(void 0===i&&(i=!1),!this.video)return!1;this.video.src&&i||(this.video.src="",this.video.src=this.videoOrigin)}});
"use strict";flexbe_cli.modal.register(20,{onInit:function(){this.video=this.$modal.find("iframe")[0],this.videoOrigin=this.video?this.video.src||this.video.getAttribute("data-src"):""},onOpen:function(){this.bindVideo(!0)},onClose:function(){this.bindVideo(!1)},bindVideo:function(i){if(void 0===i&&(i=!1),!this.video)return!1;this.video.src&&i||(this.video.src="",this.video.src=this.videoOrigin)}});
"use strict";flexbe_cli.modal.register(3,{onInit:function(){this.video=this.$modal.find("iframe")[0],this.videoOrigin=this.video?this.video.src||this.video.getAttribute("data-src"):""},onOpen:function(){this.bindVideo(!0)},onClose:function(){this.bindVideo(!1)},bindVideo:function(i){if(void 0===i&&(i=!1),!this.video)return!1;this.video.src&&i||(this.video.src="",this.video.src=this.videoOrigin)}});
"use strict";flexbe_cli.widget.register(1,{$list:null,$button:null,isOpen:!1,get list(){return flexbe_cli.widget.cart.getList()},get count(){return flexbe_cli.widget.cart.getCount()},get total(){return flexbe_cli.widget.cart.getTotal()},onInit:function(){var t=this;this.$container=this.$widget.find(".widget-data"),this.$list=this.$widget.find(".order-list > ul"),this.$form=this.$widget.find(".component-form "),this.$button=this.$widget.find(".cart-button"),this.$delivery=this.$widget.find(".cart-checkout-delivery"),this.$total=this.$widget.find(".cart-checkout-summary__price"),this.$subtotal=this.$widget.find(".cart-checkout-subtotal__price"),this.$shipping=this.$widget.find(".cart-checkout-shipping__price"),this.$count=this.$widget.find(".cart-checkout-count__value"),this.$shippingNotFix=this.$widget.find(".cart-shipping__not-fix-total"),this.$untilFree=this.$widget.find(".cart-delivery-free"),this.$minTotal=this.$widget.find(".cart-min-total"),this.hasDelivery=this.$form.find('[data-type="delivery"]').length>0,this.isAutoOpen=this.$container.data("autoOpen"),this.isAutoOpen=this.$container.data("autoOpen"),this.minTotal=this.$container.data("minTotal"),this.$formButton=this.$form.find(".form-submit");var e=flexbe_cli.widget.cart.delivery.methods.filter((function(e){return e.useMinTotal&&t.minTotal<+e.prices[0].from}));e.length?this.arrMinDelivery=e.map((function(e){return e.$item=t.$form.find('[data-delivery="'+e.id+'"]'),e})):this.arrMinDelivery=[],this.$formButton.find(".component-button").append('<div class="flexbe-tooltip" data-value=""></div>'),this.$tooltipster=this.$formButton.find(".flexbe-tooltip "),this.events(),this.renderButton(),this.isOpen&&this.renderList()},onLoad:function(){this.formInit()},onUpdate:function(){this.onInit(),this.isOpen&&(this.$container.addClass("fade-in noanimate"),this.open())},onUpdateList:function(){this.updatePrices(),this.isOpen&&this.renderList()},onItemsAdd:function(){var t=this;this.$button.removeClass("blink"),this.$button.outerWidth(),this.$button.addClass("blink"),this.updatePrices(),this.isOpen&&this.renderList(),this.isAutoOpen&&1===this.count&&setTimeout((function(){t.open()}),200)},onItemsRemove:function(){this.updatePrices(),this.isOpen&&this.renderList()},onDeliveryChange:function(){this.updatePrices()},onUpdateCount:function(){this.updatePrices()},onResetList:function(){this.updatePrices()},formInit:function(){var t=this,e=flexbe_cli.components.instances[this.id];(e=e.filter((function(t){return"form"===t.is}))).forEach((function(e){t.form=e,e.defineBeforeSend((function(){var i=[].concat(t.list),n=flexbe_cli.widget.cart.delivery.getActive(),s=t.hasDelivery&&n.price.untilMinTotal;if(t.minTotal&&t.minTotal>t.total||s)return!1;t.hasDelivery&&n&&i.push({id:"delivery:"+n.id,type:"delivery",title:n.title,img:"",price:n.price.current,count:1}),e.addItems(i)})),e.defineAfterSent((function(){t.close(),flexbe_cli.stat.ecommerce.purchase(t.list),flexbe_cli.widget.cart.dispatch("resetList")}))}))},events:function(){var t=this,e=function(){if(flexbe_cli.is_admin&&(window.parent.flexbe.modal.visible||[]).length)return!1;return!0};flexbe_cli.events.off("ui_cart_open.cart-widget").on("ui_cart_open.cart-widget",(function(e,i){t.open(i)})),flexbe_cli.events.off("ui_cart_close.cart-widget").on("ui_cart_close.cart-widget",(function(e,i){t.close(i)})),flexbe_cli.widget.cart.off("dispatch.cart-widget").on("dispatch.cart-widget",(function(e,i){var n=i.name;"updateList"===n?t.onUpdateList():"updateCount"===n?t.onUpdateCount():"addItem"===n?t.onItemsAdd():"removeItem"===n?t.onItemsRemove():"resetList"===n&&t.onResetList()})),flexbe_cli.widget.cart.delivery.off("dispatch.cart-widget").on("dispatch.cart-widget",(function(e,i){"selectMethod"===i.name&&t.onDeliveryChange()})),this.$widget.off("click.cart-button").on("click.cart-button",".cart-button",(function(){t.isOpen?t.close():t.open()})),this.$container.off("click.close").on("click.close","a.close, .scroller, .widget-content-wrapper",(function(i){e()&&i.target===i.currentTarget&&t.close()})),$(document).off("keyup.cart_esc_close").on("keyup.cart_esc_close",(function(i){27===i.which&&e()&&!flexbe_cli.modal.$list.hasClass("rise")&&t.close()})),this.$list.off("click").on("click","[data-action]",(function(t){var e=$(t.currentTarget).closest("li").attr("data-id"),i=flexbe_cli.widget.cart.getItem(e),n=$(t.currentTarget).attr("data-action");e&&("remove"===n||"-"===n&&1===i.count?flexbe_cli.widget.cart.dispatch("removeItem",e):flexbe_cli.widget.cart.dispatch("updateCount",{id:e,count:n}))})),this.$list.off("input").on("input","input.count",(function(t){var e=$(t.currentTarget).closest("li").attr("data-id"),i=+t.currentTarget.value;i&&flexbe_cli.widget.cart.dispatch("updateCount",{id:e,count:i})})),this.$list.off("blur").on("blur","input.count",(function(t){if(!+t.currentTarget.value){var e=$(t.currentTarget).closest("li").attr("data-id");t.currentTarget.value=1,flexbe_cli.widget.cart.dispatch("updateCount",{id:e,count:1})}}))},open:function(){this.isOpen=!0,flexbe_cli.block.pushOverlay("cart",!0),this.oldHash=!1,flexbe_cli.is_admin?this.$container.addClass("is-editor"):(this.$button.addClass("hide"),/customer_cart/.test(location.hash)||(/^#{1,2}/.test(location.hash)&&(this.oldHash=location.hash),history.pushState(null,null,"#customer_cart"))),this.updatePrices(),this.renderList(),flexbe_cli.scroll.scrollLock.lock(),this.$area.addClass("show"),this.$container.hasClass("noanimate")?(this.$container.addClass("show fade-in"),this.$container.removeClass("noanimate")):(this.$container.addClass("show"),this.$container.outerHeight(),this.$container.addClass("fade-in"),this.$container.removeClass("noanimate")),this._onOpen(),flexbe_cli.events.emit("cart_opened")},close:function(){var t=this;$(window).off("keyup.cart_esc_close"),this.isOpen&&(this.isOpen=!1,flexbe_cli.scroll.scrollLock.unlock(),$(".container-list").removeClass("editor-stop"),this.$button.removeClass("hide"),this.$container.removeClass("fade-in"),this.$container.addClass("fade-out"),setTimeout((function(){t.$container.removeClass("fade-out show noanimate")}),350),this._onClose(),flexbe_cli.events.emit("cart_closed"))},renderList:function(){this.listRendered=!0;var t="";this.list.length&&this.list.forEach((function(e){var i;t+='\n                <li data-id="'+(i=e).id+'">\n                <div class="img-holder">\n                    <div class="img" '+(i.img&&'style="background-image: url('+i.img+')"')+'></div>\n                </div>\n\n                <div class="content-holder">\n                    <div class="flex-line">\n                        <div class="item-title">'+(i.title||"-")+'</div>\n                        <a class="times" data-action="remove"></a>\n                    </div>\n                    <div class="flex-line">\n                        <div class="item-count">\n                            <a data-action="-"></a>\n                            <input type="number" class="count" min="1" value="'+i.count+'"/>\n                            <a data-action="+"></a>\n                        </div>\n\n                        <div class="item-price">\n                            <span class="price">'+flexbe_cli.locale.formatMoney(i.price*i.count)+"</span>\n                        </div>\n                    </div>\n                </div>\n            </li>"})),this.$list.html(t),this.$container.toggleClass("is-empty",0===this.list.length)},renderButton:function(){this.$button.attr("data-count",this.count),this.$button.toggleClass("hidden",0===this.$button.attr("data-count"))},updatePrices:function(){var t=this,e=this,i=this.list,n=this.count,s=this.total,o=this.hasDelivery,a=flexbe_cli.widget.cart.delivery.getPrice(),l=this.$formButton,r=a.freeFrom?a.useNotFixTotal&&a.untilFree:a.useNotFixTotal,c=r?"⏤":a.currentFormatted;this.renderButton(),this.listRendered&&i.forEach((function(e){var i=t.$list.find('[data-id="'+e.id+'"]');i.find(".count").val(e.count),i.find(".cart-price").text(flexbe_cli.locale.formatMoney(e.price*e.count,{freeLabel:!0}))})),this.arrMinDelivery.length&&this.arrMinDelivery.forEach((function(t){return t.$item.toggleClass("form-field-delivery-item--blocked",!(t.prices[0].from<=e.total))})),this.$shipping.text(c),this.$shippingNotFix.toggleClass("show",!!r),this.$subtotal.text(flexbe_cli.locale.formatMoney(s,{freeLabel:!0}));var d=o&&!r?s+a.current:s;flexbe_cli.locale.animateNumber({target:this.$total,to:d,asMoney:!0}),this.$count.text(n),this.$container.find(".product-count .count").text(n),this.$delivery.toggleClass("hide",!o),this.$untilFree.toggleClass("hide",!o);var h=this.minTotal-this.total,u=this.minTotal>a.minTotal,f=u&&h>0,m=f||a.untilMinTotal;l.toggleClass("disabled",!!m),this.$tooltipster.toggleClass("show",!!m);var p=l.hasClass("disabled");if(p){var g=flexbe_cli.locale.tr("cart.min_total_tip")+" "+flexbe_cli.locale.formatMoney(this.minTotal,{freeLabel:!0}),$=flexbe_cli.locale.tr("cart.min_total_delivery_tip")+" "+a.minTotalFormatted,v=f?g:$;this.$tooltipster.toggleClass("big",!f),v!==this.tipText&&(this.tipText=v,this.$tooltipster.attr("data-value",v))}if(p?l.off("click.disabled").on("click.disabled",(function(){setTimeout((function(){l.addClass("shake"),setTimeout((function(){l.removeClass("shake")}),500)}),30)})):l.off("click.disabled"),this.minTotal&&this.$minTotal.length&&(this.$minTotal.toggleClass("show",f),this.$minTotal.find(".min-total__total").text(flexbe_cli.locale.formatMoney(this.minTotal,{freeLabel:!0})),flexbe_cli.locale.animateNumber({target:this.$minTotal.find(".min-total__count"),to:h,asMoney:!0,freeLabel:!1})),o&&this.$untilFree.length){var b=a.untilMinTotal/a.minTotal*100,_=a.untilFree/a.freeFrom*100,x=a.untilMinTotal?b:_,w=(a.untilFree||a.untilMinTotal)&&(!(h>0)||!u);this.$untilFree.toggleClass("hide",!w),this.$untilFree.toggleClass("show",!!w),this.$untilFree.toggleClass("show-min-total",!!a.untilMinTotal),this.$untilFree.find(".progress-path").attr("stroke-dashoffset",x),flexbe_cli.locale.animateNumber({target:this.$untilFree.find(".delivery-free__count"),to:a.untilFree,asMoney:!0,freeLabel:!1}),flexbe_cli.locale.animateNumber({target:this.$untilFree.find(".delivery-min-total__count"),to:a.untilMinTotal,asMoney:!0,freeLabel:!1})}}});
"use strict";flexbe_cli.widget.register(2,{require:["/_s/lib/anime/anime.min.js?320"],$list:null,onLoad:function(){var t=this;this.$list=this.$widget.find(".anchors-list"),this.list="object"==typeof this.$list.data("anchors")&&this.$list.data("anchors").list||[],this.style=this.$list.data("anchors").style||1,this.show_title=this.$list.data("anchors").show_title,this.$list.removeAttr("data-anchors"),flexbe_cli.run.is_mobile||(this.drawList(),this.setActive(),flexbe_cli.is_admin&&flexbe_cli.events.off("layout_change.anchors").on("layout_change.anchors",(function(i,e){"block"===e.is&&t.drawList()})))},check:function(){var t=$(".b_block").not('[data-b-type*="overflow"]');this.list=this.list.filter((function(i){if(i.enabled&&t.closest('[data-id="'+i.id+'"]')[0])return!0}))},drawList:function(){var t=this;if(0===flexbe_cli.block.$blocks.length)return this.$list.hide(),!1;this.$list.show(),this.check();var i="";flexbe_cli.is_admin&&0===this.list.length?i='<svg style="color: #adadad" width="18" height="98" viewBox="0 0 18 98" xmlns="http://www.w3.org/2000/svg">\n                <g fill="none" fill-rule="evenodd">\n                    <circle opacity=".05" cx="9" cy="5" r="5"/>\n                    <circle opacity=".2" cx="9" cy="25" r="5"/>\n                    <circle opacity=".2" cx="9" cy="73" r="5"/>\n                    <circle opacity=".05" cx="9" cy="93" r="5"/>\n                    <path d="M9 40a9 9 0 1 0 0 18 9 9 0 0 0 0-18zm5.126 9.626h-4.5v4.5H8.34v-4.5h-4.5V48.34h4.5v-4.5h1.286v4.5h4.5v1.286z" opacity=".45"/>\n                </g>\n            </svg>':this.list.length>0&&(this.list.forEach((function(e){i+="<li"+(t.show_title&&e.title?' data-title="'+e.title+'"':"")+'><a href="#'+e.id+'"></a></li>'})),i+='<li class="helper"><a></a></li>'),this.$list.find("ul").html(i),this.$helper=this.$list.find(".helper"),this.animateList()},animateList:function(){var t=this;if(0!==this.list.length){if(flexbe_cli.is_admin)this.$helper.css({opacity:1,transform:"translateY("+24*this.index+"px)"});else{var i=anime({targets:this.$list.find("li").not(this.$helper).get(),duration:200,opacity:[0,1],scale:[.4,1],easing:"easeOutBack",autoplay:!1,delay:function(t,i){return 200*i},complete:function(){anime({targets:t.$helper.get(),duration:400,translateY:24*t.index,scale:[2.5,1],opacity:[0,1],easing:"easeInExpo"})}});this.$list.addClass("hide"),setTimeout((function(){t.$list.removeClass("hide"),i.play()}),1500)}this.$list.find("li").removeClass("active").eq(this.index).addClass("active")}},index:0,setActive:function(){var t=this;if(0!==this.list.length){var i=function(i){t.$list.css("color",i.tween.color);var e=t.index;t.list.some((function(t,s){if(t.id==i.id)return e=s,!0})),(e=Math.max(0,Math.min(t.list.length-1,e)))!=t.index&&(!function(i){if(t.$list.find("li").removeClass("active"),t.$list.find("li").eq(i).addClass("active"),1==t.style){var e=24*i,s=i-t.index>0?12:-12;anime.remove(t.$helper[0]),anime({targets:t.$helper[0],translateY:e-s,scaleY:2.5,scaleX:.6,duration:100,easing:"easeInQuad",complete:function(){anime({targets:t.$helper[0],translateY:e,scaleY:1,scaleX:1,duration:100,easing:"easeOutQuad"})}})}}(e),t.index=e)};flexbe_cli.block.$list.find(".b_block").each((function(t,e){var s=e._core;s&&s.inFocus&&i(s)})),flexbe_cli.events.off("entity_event.anchors").on("entity_event.anchors",(function(t,e){var s=e.type,a=e.core,l=e.params;"onFocus"===s&&l.state&&"block"===a.is&&i(a)})),this.$list.on("click","li",(function(t){if(!$(t.target).is("a"))return $(t.currentTarget).find("[href]").trigger("click"),t.preventDefault(),!1}))}}});